"use strict";(self.webpackChunkdocument=self.webpackChunkdocument||[]).push([[473],{89:(e,t,n)=>{n.d(t,{Ds:()=>i,Kn:()=>l,XP:()=>o,kC:()=>r,kJ:()=>s});const s=e=>Array.isArray(e),l=e=>"function"==typeof e||"object"==typeof e&&!!e,a=Object.assign;const o=e=>Object.keys(e);function i(e,t,n){void 0===n&&(n=!1);let s,l,o=null;const i=()=>{o=null,n||(s=e(...l)),o||(l=null)},r=a((function(){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];l=r;const d=n&&!o;return o&&clearTimeout(o),o=window.setTimeout(i,t),d&&(s=e(...l)),s}),{cancel:()=>{o&&clearTimeout(o),o=null}});return r}const r=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},8884:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(2983),l=n(4282);const a={bordered:"bordered_TQbw",horizontalResize:"horizontalResize_h5Cl",verticalResize:"verticalResize_sNeV",codeContainer:"codeContainer_tHUp",label:"label_DDWs",editorContainer:"editorContainer_gxWf"};var o=n(1610),i=n(8364),r=n(7096),c=n(4773),d=n(7099),u=n(480),m=n(89);const p="wrapper_a_Cb",h="consoleControl_x8at",g="consoleHead_y3Bg",f="consoleBlock_YI7l";var b=n(7458);const v=()=>(0,b.jsx)("svg",{height:"16",version:"1.1",viewBox:"0 0 24 24",children:(0,b.jsxs)("g",{strokeLinecap:"round",strokeWidth:"1.8",fill:"none",strokeLinejoin:"round",children:[(0,b.jsx)("polyline",{points:"4,17 10,11 4,5"}),(0,b.jsx)("line",{x1:"12",x2:"20",y1:"19",y2:"19"})]})}),y=s.forwardRef(((e,t)=>{let{className:n,...l}=e;const[a,o]=(0,s.useState)([]),r=(0,s.useCallback)((e=>{"null"===e.origin&&"html-console-output"===e.data.type&&o((t=>[...t,e.data.log]))}),[]),c=(0,s.useCallback)((()=>o([])),[]);return(0,s.useImperativeHandle)(t,(()=>({clearLogs:()=>o([])}))),(0,s.useEffect)((()=>(window.addEventListener("message",r),()=>window.removeEventListener("message",r))),[]),(0,b.jsxs)("div",{ref:t,className:(0,i.Z)(p,n),...l,children:[(0,b.jsxs)("div",{className:(0,i.Z)(h),children:[(0,b.jsxs)("div",{className:g,children:[(0,b.jsx)(v,{}),"Console"]}),(0,b.jsx)("button",{onClick:c,children:"Clear console"})]}),(0,b.jsx)("div",{className:(0,i.Z)("console-block",f),dangerouslySetInnerHTML:{__html:a.reduce(((e,t)=>(e?.prev===t?e.datas.at(-1)[1]+=1:e.datas.push([t,1]),e.prev=t,e)),{prev:"",datas:[]}).datas.reduce(((e,t)=>{let[n,s]=t;if(1===s)return e+`\n${n}`;return e+`\n${`<div class="console-line-wrapper"><span class="console-count">${s}</span>${n}</div>`}`}),"")}})]})})),x=s.memo(y);var j=n(813);const w={script:{label:"Script",name:"script.js",language:"javascript",value:"const $btn = doumi.create$('button', { className: 'welcomeBtn', innerHTML: 'welcome' })\ndoumi.on($btn, 'click', (event) => console.log('welcome'))\ndocument.body.appendChild($btn)\n\nconsole.log('isNumber', doumi.isNumber(1), doumi.isNumber('1'))\n\nconst data = { a: '0' }\ndoumi.set(data, 'b.[1]', 'set data')\nconsole.log(data)\n"},style:{label:"Style",name:"style.css",language:"css",value:"body {\n\tpadding: 1rem;\n}\n\n.head {\n\tfont-size: 1.25rem;\n\tmargin-bottom: 1rem;\n}\n"},html:{label:"HTML",name:"index.html",language:"html",value:'<div class="head">Doumi demo</div>\n'}};function C(e){let{libSource:t}=e;const{siteConfig:n}=(0,j.Z)(),l=(0,r.Ik)(),{colorMode:p}=(0,u.I)(),h=(0,s.useMemo)((()=>"dark"===p?"vs-dark":"light"),[p]),g=(0,s.useRef)(null),f=(0,s.useRef)(null),v=(0,s.useRef)({html:null,style:null,script:null}),[y,C]=(0,s.useState)(""),k=(0,s.useCallback)((0,m.Ds)((()=>{const e=Object.values(v.current).map((e=>e.getValue()));if(e.every((e=>!e.trim().length)))return void C("");const[t,s,l]=e,a=`\n        <!doctype html>\n        <html lang="en">\n          <head>\n            <link href="https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css" rel="stylesheet">\n            <style>${s}</style>\n          </head>\n          <body>\n            ${t}\n          </body>\n          <script src="${"/"===n.baseUrl?"":n.baseUrl}/lib/html-console-output.js"><\/script>\n          <script src="https://cdn.jsdelivr.net/npm/doumi/dist/doumi.js"><\/script>\n          <script type="text/javascript">${l}<\/script>\n        </html>\n      `;C((e=>e===a?a+"  ":a)),g.current?.clearLogs()}),500),[]),L=(0,s.useCallback)((e=>{e.ctrlKey&&"s"===e.key&&(e.preventDefault(),l.editor.getEditors().forEach((e=>e.getAction("editor.action.formatDocument").run())),k())}),[k,l]);return(0,s.useEffect)((()=>{k()}),[k]),(0,s.useEffect)((()=>(window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L))),[L]),(0,s.useEffect)((()=>{l?.languages&&(l.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!1}),l.languages.typescript.javascriptDefaults.setCompilerOptions({target:l.languages.typescript.ScriptTarget.ES2015,allowNonTsExtensions:!0}),l.languages.typescript.javascriptDefaults.addExtraLib(t))}),[l]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.e,{className:a.bordered,style:{borderRightWidth:"1px"},defaultSize:{width:"50%"},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:(0,b.jsx)("div",{className:(0,i.Z)(a.codeContainer,a.editorContainer),style:{height:"100%",display:"flex"},children:(0,b.jsx)(c.Z,{children:Object.entries(w).map((e=>{let[t,n]=e;return(0,b.jsx)(d.Z,{value:t,label:n.label,children:(0,b.jsx)(r.ZP,{theme:h,path:n.name,defaultLanguage:n.language,defaultValue:n.value,onMount:e=>v.current[t]=e,onChange:k})},t)}))})})}),(0,b.jsxs)("div",{className:a.verticalResize,style:{width:"100%"},children:[(0,b.jsx)(o.e,{style:{display:"flex"},defaultSize:{height:"70%"},enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:(0,b.jsxs)("div",{className:a.codeContainer,style:{flexGrow:1},children:[(0,b.jsx)("div",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Preview"}),(0,b.jsx)("iframe",{ref:f,style:{backgroundColor:y.length?"white":void 0,flexGrow:1,overflow:"auto"},srcDoc:y,title:"output",sandbox:"allow-scripts",width:"100%",height:"100%"})]})}),(0,b.jsx)(x,{ref:g,style:{height:"100%"}})]})]})}function k(){const{siteConfig:e}=(0,j.Z)(),[t,n]=(0,s.useState)("");return(0,s.useEffect)((()=>{fetch("https://cdn.jsdelivr.net/npm/doumi/dist/index.d.ts").then((e=>e.text())).then((e=>{const t=`declare namespace doumi {\n${e.substring(0,e.lastIndexOf("export {")).replace(/declare const/gi,"const").replace(/declare function/gi,"function")}\n}`;n(t)}))}),[]),(0,b.jsx)(l.Z,{title:"Demo",description:"Utility library for Javascript",children:(0,b.jsx)("main",{className:a.horizontalResize,children:t.length?(0,b.jsx)(C,{libSource:t}):null})})}}}]);